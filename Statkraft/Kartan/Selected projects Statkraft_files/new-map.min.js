$(document).ready(function(){$(".dropdown-header").click(function(){$(this).closest(".select-map-options-box").find(".map-dropdown").toggle();});var plants=[];var countries=[];var currentCountry="";$.each(Statkraft.mapProjects,function(index,plant){plants.push(plant.MapProjectName);currentCountry=plant.MapProjectCountry;if($.inArray(currentCountry,countries)==-1){countries.push(currentCountry);$("#map-country-select .map-dropdown").append("<li class=\"checkbox-item clickable\"><a class=\"type-checkbox checked\" type=\""+currentCountry+"\" href=\"http://statkraft.com/about-statkraft/Projects/#\" data-text=\""+currentCountry+"\"></a></li>");}});$(".map-search").typeahead({hint:true,highlight:true,minLength:1},{name:"plants",displayKey:"value",source:substringMatcher(plants)});});var substringMatcher=function(strs){return function findMatches(q,cb){var matches,substringRegex;matches=[];substrRegex=new RegExp(q,'i');$.each(strs,function(i,str){if(substrRegex.test(str)){matches.push({value:str});}});cb(matches);};};