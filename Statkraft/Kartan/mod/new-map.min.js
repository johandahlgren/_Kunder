function filterOnCountry(){var e="",t=$("#map-country-select ul li a.selected").attr("data-text");$.each(Statkraft.mapProjects,function(a,o){e=o.MapProjectCountry.trim(),(e==t||"All"==t)&&console.log("LÃ¤gger till: "+o.MapProjectName)})}$(document).ready(function(){$(".dropdown-header").click(function(){$(this).closest(".select-map-options-box").find(".map-dropdown").toggle(),$(this).toggleClass("expanded")});var e=[],t=[],a="";$.each(Statkraft.mapProjects,function(o,n){e.push(n.MapProjectName),a=n.MapProjectCountry,-1==$.inArray(a,t)&&(t.push(a),$("#map-country-select .map-dropdown").append('<li class="checkbox-item"><a class="type-checkbox" type="'+a+'" href="http://statkraft.com/about-statkraft/Projects/#" data-text="'+a+'"><span class="checkbox-marker"></span></a></li>'))}),$(".map-search").typeahead({hint:!0,highlight:!0,minLength:1},{name:"plants",displayKey:"value",source:substringMatcher(e)}),$(".map-search").bind("typeahead:selected",function(e,t){$.each(Statkraft.mapProjects,function(e,a){a.MapProjectName==t.value&&(window.location=a.MapProjectUrl)})}),$("#map-country-select ul li a").click(function(){$(this).closest(".map-dropdown").find("a").removeClass("selected"),$(this).addClass("selected"),$(this).closest(".select-map-options-box").find(".map-dropdown").hide(),$(this).closest(".dropdown-header").removeClass("expanded"),filterOnCountry()})});var substringMatcher=function(e){return function(t,a){var o;o=[],substrRegex=new RegExp(t,"i"),$.each(e,function(e,t){substrRegex.test(t)&&o.push({value:t})}),a(o)}};